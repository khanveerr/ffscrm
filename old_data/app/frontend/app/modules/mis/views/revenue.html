<div class="row margin-bottom-0">
    <div class="col s12 m12 l12">
		<div class="card">
			<div class="card-content">
				<div class="row margin-bottom-0">
					<div class="col l2">
						<select id="filter_city" ng-model="filter_city" ng-change="filterData_Revenue()" class="browser-default">
						    <option value="" selected>City</option>
						    <option value="{{ key }}" ng-repeat="(key,value) in cities">{{ value }}</option>
						    <!-- <option value="1">Mumbai</option>
						    <option value="2">Bangalore</option>
						    <option value="3">New Delhi</option> -->
						</select>
					</div>
					<div class="col l3">
						<select id="filter_leadsource" ng-model="filter_leadsource" ng-change="filterData_Revenue()" class="browser-default">
						    <option value="" selected>Lead Source</option>
						    <option value="{{ key }}" ng-repeat="(key,value) in ls_options">{{ value }}</option>
						    <!-- <option value="1">Mumbai</option>
						    <option value="2">Bangalore</option>
						    <option value="3">New Delhi</option> -->
						</select>
					</div>
					<div class="col l3">
						<select id="filter_service" ng-model="filter_service" ng-change="filterData_Revenue()" class="browser-default">
						    <option value="" selected>Service Name</option>
						    <option value="{{ key }}" ng-repeat="(key,value) in services_options">{{ value }}</option>
						    <!-- <option value="1">Mumbai</option>
						    <option value="2">Bangalore</option>
						    <option value="3">New Delhi</option> -->
						</select>
					</div>
					<div class="col l2">
						<input type="date" ng-model="from_sdate" placeholder="Start Date" class="mydatepicker">
					</div>
					<div class="col l2">
						<input type="date" ng-model="to_sdate" placeholder="End Date" ng-change="filterData_Revenue()" class="mydatepicker">
					</div>
                    <div class="col l2">
                        <select id="filter_client_type" ng-model="filter_client_type" ng-change="filterData_Revenue()" class="browser-default">
                            <option value="" selected>Client Type</option>
                            <option value="0" >Existing Client</option>
                            <option value="1" >New Client</option>
                        </select>
                    </div>
				</div>
			</div>
		</div>
    </div>
</div>



<div class="row margin-bottom-0">
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l3">
        			<i class="fa fa-inr fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l9">
        			<div class="huge">{{ total_booking_revenue }}</div>
        			<div>Total Bookings</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l5">
        			<i class="fa fa-database fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l7 padding-left-5">
        			<div class="huge">{{ total_bookings }}</div>
        			<div>Total Orders</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l5">
        			<i class="fa fa-shopping-cart fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l7 padding-left-5">
        			<div class="huge">{{ today_total_bookings }}</div>
        			<div>New Orders</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l3">
        			<i class="fa fa-inr fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l9">
        			<div class="huge">{{ today_total_booking_revenue }}</div>
        			<div>Today's Bookings</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
</div>

<div class="row margin-bottom-0">
	<div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l3">
        			<i class="fa fa-inr fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l9">
        			<div class="huge">{{ total_average_order_value }}</div>
        			<div>Total Average Order Value</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
            <div class="row margin-bottom-0">
                <div class="col l3">
                    <i class="fa fa-inr fa-5x margin-top-5"></i>
                </div>
                <div class="col l9">
                    <div class="huge">{{ new_lead_count }}</div>
                    <div>Lead Count</div>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
            <div class="row margin-bottom-0">
                <div class="col l3">
                    <i class="fa fa-inr fa-5x margin-top-5"></i>
                </div>
                <div class="col l9">
                    <div class="huge">{{ cancelled_order_count }}</div>
                    <div>Cancelled Orders</div>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content">
        	<div class="row margin-bottom-0">
        		<div class="col l3">
        			<i class="fa fa-inr fa-5x margin-top-5"></i>
        		</div>
        		<div class="col l9">
        			<div class="huge">{{ today_average_order_value }}</div>
        			<div>Today Avg. Order Value</div>
        		</div>
        	</div>
        </div>
      </div>
    </div>
</div>

<div class="row margin-bottom-0">
    <div class="col s12 m12 l12">
		<div class="card">
			<div class="card-content">
				<span class="card-title">Monthly Bookings Chart</span>
				<div id="area_chart"></div>
			</div>
		</div>
    </div>
</div>


<div class="row margin-bottom-0">
    <div class="col s12 m12 l6">
		<div class="card">
			<div class="card-content">
				<span class="card-title">Lead Source Wise Bookings</span>
				<div id="lead_source_wise"></div>
			</div>
		</div>
    </div>
    <div class="col s12 m12 l6">
    	<div class="card">
    		<div class="card-content">
    			<span class="card-title">Total Bookings</span>
				<table class="bordered striped centered responsive-table">
					<thead>
						<tr>
							<th>Date</th>
							<th>Total Orders</th>
							<th>Pre Tax Bookings</th>
							<th>Post Tax Bookings</th>
						</tr>
					</thead>

					<tbody>
						<tr ng-repeat="data in booking_data">
							<td>{{ data['_id'] }}</td>
							<td>{{ data['fieldCount'] }}</td>
							<td>{{ data['pretotal'] }}</td>
							<td>{{ data['posttotal'] }}</td>
						</tr>
					</tbody>
				</table>
			</div>
    	</div>
    </div>
</div>

<div class="row margin-bottom-0">
    <div class="col s12 m12 l6">
		<div class="card">
			<div class="card-content">
				<span class="card-title">Lead Conversion Analysis - No of Orders</span>
				<div id="lead_pie_chart"></div>
			</div>
		</div>
    </div>
    <div class="col s12 m12 l6">
		<div class="card">
			<div class="card-content">
				<span class="card-title">Lead Conversion Analysis - Bookings Value</span>
				<div id="lead_data_chart"></div>
			</div>
		</div>
    </div>
</div>


<script type="text/javascript">
	
	$(document).ready(function(){

		$('.mydatepicker').pickadate({
		    selectMonths: true, // Creates a dropdown to control month
		    selectYears: 15, // Creates a dropdown of 15 years to control year
		    format: 'yyyy-mm-dd',
				onSet: function () {
		        this.close();
		    },
		    onClose: function(){
		        $('.mydatepicker').blur();
		        $('.picker').blur();
		        $('.mydatepicker').stop();
			}
		});

	});

</script>
